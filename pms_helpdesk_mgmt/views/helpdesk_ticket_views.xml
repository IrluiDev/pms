<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <record id="helpdesk_ticket_view_search" model="ir.ui.view">
        <field name="name">helpdesk.ticket.view.search</field>
        <field name="model">helpdesk.ticket</field>
        <field name="inherit_id" ref="helpdesk_mgmt.helpdesk_ticket_view_search" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='name']" position="after">
                <field name="company_id" />
                <field name="pms_property_id" />
                <field name="room_id" />
                <field name="category_id" />
            </xpath>
            <xpath expr="//filter[@name='group_partner']" position="after">
                <filter
                    string="Company"
                    name="group_company"
                    domain="[]"
                    context="{'group_by':'company_id'}"
                />
                <filter
                    string="Property"
                    name="group_property"
                    domain="[]"
                    context="{'group_by':'pms_property_id'}"
                />
                <filter
                    string="Room"
                    name="group_room"
                    domain="[]"
                    context="{'group_by':'room_id'}"
                />
                <filter
                    string="Category"
                    name="group_category"
                    domain="[]"
                    context="{'group_by':'category_id'}"
                />
            </xpath>
        </field>
    </record>
    <!-- View Ticket kanban -->
    <record id="pms_ticket_view_kanban" model="ir.ui.view">
        <field name="model">helpdesk.ticket</field>
        <field name="inherit_id" ref="helpdesk_mgmt.view_helpdesk_ticket_kanban" />
        <field name="arch" type="xml">
            <xpath
                expr="//div[@class='o_kanban_record_headings']/field[@name='number']"
                position="after"
            >
                <div class="font-weight-bold text-info">
                    <br />
                    <span class="text-dark">
                        <field name="pms_property_id" />
                    </span>
                </div>
                <div class="text-warning">
                    <span class="text-dark"><field name="room_id" /></span>
                </div>
                <div class="text-warning">
                    <span class="text-dark"><field name="category_id" /></span>
                </div>

                <div class="text-warning">
                    <span class="text-dark"><field name="create_date" /></span>
                </div>
            </xpath>
        </field>
    </record>
    <!-- View Ticket tree -->
    <record id="ticket_view_tree" model="ir.ui.view">
        <field name="model">helpdesk.ticket</field>
        <field name="inherit_id" ref="helpdesk_mgmt.ticket_view_tree" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='name']" position="after">
                <field name="category_id" />
                <field name="pms_property_id" />
                <field name="room_id" />
                <field name="tag_ids" widget="many2many_tags" />
            </xpath>
        </field>
    </record>
    <!-- View Form Ticket -->
    <record id="ticket_view_form" model="ir.ui.view">
        <field name="model">helpdesk.ticket</field>
        <field name="inherit_id" ref="helpdesk_mgmt.ticket_view_form" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='company_id']" position="after">
                <field name="pms_property_id" options="{'no_create': True}" />
                <field
                    name="room_id"
                    options="{'no_create': True}"
                    attrs="{'invisible': [('pms_property_id', '=', False)]}"
                />
            </xpath>
            <xpath expr="//field[@name='partner_lang']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//field[@name='sequence']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
        </field>
    </record>
</odoo>
